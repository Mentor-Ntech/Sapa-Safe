(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1930],{15488:function(e,s,a){Promise.resolve().then(a.bind(a,16831))},16831:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var t=a(13267),r=a(85236),n=a(12751),l=a(49205),i=a(71200),c=a(11879),d=a(63600),o=a(47435),m=a(42119),u=a(1861),x=a(28784),h=a(6670),f=a(39132),y=a(4338),p=a(76421);let j=(0,p.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),N=(0,p.Z)("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var g=a(48649);let v=(0,p.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var b=a(39217);function w(){var e,s;let a=(0,n.useRouter)(),p=(0,n.useSearchParams)(),{address:w,isConnected:k}=(0,i.m)(),C=null==p?void 0:p.get("id"),M=(0,l.K$)(C);(0,l.Aj)();let P=(0,l.Cj)(),Z=(null===(e=M.vaultInfo)||void 0===e?void 0:e.token)&&(null===(s=P.supportedTokens.find(e=>{var s;return e.address.toLowerCase()===(null===(s=M.vaultInfo)||void 0===s?void 0:s.token.toLowerCase())}))||void 0===s?void 0:s.symbol)||"TOKEN",[A,z]=(0,r.useState)(!1),[E,F]=(0,r.useState)(!1),[W,_]=(0,r.useState)(!1),[S,V]=(0,r.useState)(1);(0,r.useEffect)(()=>{C||a.push("/vaults")},[C,a]),console.log("Vault details:",{vaultAddress:C,vaultInfo:M.vaultInfo,currentMonth:M.currentMonth,monthlyPayment:M.monthlyPayment,progressPercentage:M.progressPercentage,isCompleted:M.isCompleted,canWithdrawCompleted:M.canWithdrawCompleted,canWithdrawEarly:M.canWithdrawEarly,paymentSummary:M.paymentSummary});let B=async()=>{if(!M.canWithdrawCompleted){b.Am.error("Vault is not ready for withdrawal");return}try{z(!0),await M.withdrawCompletedFunds(),b.Am.success("Withdrawal initiated! Check your wallet for confirmation."),a.push("/vaults")}catch(e){console.error("Error withdrawing:",e),b.Am.error("Failed to withdraw funds")}finally{z(!1)}},L=async()=>{if(!M.canWithdrawEarly){b.Am.error("Early withdrawal not available");return}try{z(!0),await M.withdrawEarlyFunds(),b.Am.success("Early withdrawal initiated! Check your wallet for confirmation."),F(!1),a.push("/vaults")}catch(e){console.error("Error with early withdrawal:",e),b.Am.error("Failed to process early withdrawal")}finally{z(!1)}},D=async()=>{if(!M.vaultInfo||!M.currentMonth){b.Am.error("Vault information not available");return}try{await M.makeMonthlyPayment(Number(M.currentMonth)),b.Am.success("Monthly payment initiated! Check your wallet for confirmation."),_(!1)}catch(e){console.error("Error making monthly payment:",e),b.Am.error("Failed to make monthly payment")}},O=async()=>{if(!M.vaultInfo||!M.currentMonth){b.Am.error("Vault information not available");return}try{await M.processMissedPaymentForMonth(Number(M.currentMonth)),b.Am.success("Missed payment processed! Check your wallet for confirmation.")}catch(e){console.error("Error processing missed payment:",e),b.Am.error("Failed to process missed payment")}},R=async()=>{if(!M.vaultInfo){b.Am.error("Vault information not available");return}try{await M.processAllMissedPaymentsUpTo(Number(M.currentMonth)),b.Am.success("All missed payments processed! Check your wallet for confirmation.")}catch(e){console.error("Error processing all missed payments:",e),b.Am.error("Failed to process missed payments")}};if(!C)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{children:"Loading vault details..."})]})})});if(!k)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(x.Z,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Wallet Not Connected"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Please connect your wallet to view vault details."}),(0,t.jsx)(c.z,{onClick:()=>a.push("/"),children:"Connect Wallet"})]})})});if(!M.vaultInfo)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{children:"Loading vault information..."})]})})});let T=M.vaultInfo,I=Number(M.currentMonth),Y=Number(M.progressPercentage)||0,H=!!M.isCompleted,$=!!M.canWithdrawCompleted,q=!!M.canWithdrawEarly,K=M.paymentSummary,U=M.nextPaymentDueDate;return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.push("/vaults"),className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),"Back to Vaults"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Vault Details"})]}),(0,t.jsxs)(d.Zb,{className:"mb-6",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),"Vault Overview"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Vault Address"}),(0,t.jsx)("p",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:C})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,t.jsx)(o.C,{variant:H?"default":"secondary",children:H?"Completed":"Active"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Target Amount"}),(0,t.jsxs)("p",{className:"text-lg font-semibold",children:[T.targetAmount?(Number(T.targetAmount)/1e18).toFixed(2):"0"," ",Z]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Monthly Amount"}),(0,t.jsxs)("p",{className:"text-lg font-semibold",children:[T.monthlyAmount?(Number(T.monthlyAmount)/1e18).toFixed(2):"0"," ",Z]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Total Months"}),(0,t.jsx)("p",{className:"text-lg font-semibold",children:T.totalMonths||0})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-5 w-5"}),"Progress"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Current Month: ",I]}),(0,t.jsxs)("span",{children:[Y,"% Complete"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Y,"%")}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Current Balance"}),(0,t.jsxs)("p",{className:"text-lg font-semibold",children:[T.currentBalance?(Number(T.currentBalance)/1e18).toFixed(2):"0"," ",Z]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Total Paid"}),(0,t.jsxs)("p",{className:"text-lg font-semibold",children:[T.totalPaid?(Number(T.totalPaid)/1e18).toFixed(2):"0"," ",Z]})]})]})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(j,{className:"h-5 w-5"}),"Actions"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[!H&&(0,t.jsxs)(c.z,{onClick:()=>_(!0),className:"w-full",disabled:I>T.totalMonths,children:[(0,t.jsx)(N,{className:"mr-2 h-4 w-4"}),"Make Monthly Payment"]}),$&&(0,t.jsxs)(c.z,{onClick:B,className:"w-full bg-green-600 hover:bg-green-700",disabled:A,children:[A?(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Withdraw Completed Funds"]}),q&&(0,t.jsxs)(c.z,{onClick:()=>F(!0),variant:"destructive",className:"w-full",disabled:A,children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Early Withdrawal (10% Penalty)"]})]})]})]}),K&&(0,t.jsxs)(d.Zb,{className:"mb-6",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"h-5 w-5"}),"Payment Summary"]})}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Total Penalties"}),(0,t.jsxs)("p",{className:"text-lg font-semibold text-red-600",children:[K.totalPenaltiesPaid?(Number(K.totalPenaltiesPaid)/1e18).toFixed(2):"0"," ",Z]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Missed Payments"}),(0,t.jsx)("p",{className:"text-lg font-semibold",children:K.missedPaymentsCount||0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Next Payment Due"}),(0,t.jsx)("p",{className:"text-sm",children:U?new Date(1e3*Number(U)).toLocaleDateString():"N/A"})]})]}),K.missedPaymentsCount>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsx)(c.z,{onClick:O,variant:"outline",size:"sm",children:"Process Latest Missed Payment"}),(0,t.jsx)(c.z,{onClick:R,variant:"outline",size:"sm",children:"Process All Missed Payments"})]})]})]}),W&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)(d.Zb,{className:"w-full max-w-md",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{children:"Make Monthly Payment"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["You're about to make a payment for month ",I,". Amount: ",T.monthlyAmount?(Number(T.monthlyAmount)/1e18).toFixed(2):"0"," ",Z]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.z,{onClick:D,className:"flex-1",children:"Confirm Payment"}),(0,t.jsx)(c.z,{variant:"outline",onClick:()=>_(!1),className:"flex-1",children:"Cancel"})]})]})]})}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)(d.Zb,{className:"w-full max-w-md",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{className:"text-red-600",children:"Early Withdrawal Warning"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-red-600 mb-2"}),(0,t.jsx)("p",{className:"text-sm text-red-800",children:"Early withdrawal will incur a 10% penalty on your total saved amount. This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("strong",{children:"Current Balance:"})," ",T.currentBalance?(Number(T.currentBalance)/1e18).toFixed(2):"0"," ",Z]}),(0,t.jsxs)("p",{className:"text-sm text-red-600",children:[(0,t.jsx)("strong",{children:"Penalty (10%):"})," ",T.currentBalance?(.1*Number(T.currentBalance)/1e18).toFixed(2):"0"," ",Z]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("strong",{children:"You'll Receive:"})," ",T.currentBalance?(.9*Number(T.currentBalance)/1e18).toFixed(2):"0"," ",Z]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.z,{onClick:L,variant:"destructive",className:"flex-1",disabled:A,children:A?(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}):"Confirm Early Withdrawal"}),(0,t.jsx)(c.z,{variant:"outline",onClick:()=>F(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})})}function k(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{children:"Loading vault details..."})]})})}),children:(0,t.jsx)(w,{})})}},47435:function(e,s,a){"use strict";a.d(s,{C:function(){return i}});var t=a(13267);a(85236);var r=a(43211),n=a(30733);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(l({variant:a}),s),...r})}},63600:function(e,s,a){"use strict";a.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var t=a(13267),r=a(85236),n=a(30733);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},42119:function(e,s,a){"use strict";a.d(s,{_:function(){return d}});var t=a(13267),r=a(85236),n=a(54858),l=a(43211),i=a(30733);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.f,{ref:s,className:(0,i.cn)(c(),a),...r})});d.displayName=n.f.displayName},28784:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6670:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},48649:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1861:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},39132:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]])},4338:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(76421).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},54858:function(e,s,a){"use strict";a.d(s,{f:function(){return i}});var t=a(85236),r=a(82783),n=a(13267),l=t.forwardRef((e,s)=>(0,n.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var i=l},82783:function(e,s,a){"use strict";a.d(s,{WV:function(){return i},jH:function(){return c}});var t=a(85236),r=a(77888),n=a(23156),l=a(13267),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,n.Z8)(`Primitive.${s}`),r=t.forwardRef((e,t)=>{let{asChild:r,...n}=e,i=r?a:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(i,{...n,ref:t})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{});function c(e,s){e&&r.flushSync(()=>e.dispatchEvent(s))}}},function(e){e.O(0,[7150,3108,5371,1834,5682,2020,1744],function(){return e(e.s=15488)}),_N_E=e.O()}]);