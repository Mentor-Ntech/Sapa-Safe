(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1399],{33880:function(e,a,s){Promise.resolve().then(s.bind(s,87612))},87612:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return C}});var t=s(13267),r=s(49205),n=s(71200),l=s(54108),i=s(860),c=s(85236),d=s(11879),o=s(63600),u=s(47435),m=s(50972),h=s(48649),x=s(28784),f=s(1861),p=s(39132),g=s(83138),y=s(4338),v=s(76421);let j=(0,v.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var w=s(39217);function N(e){var a;let{vaultAddress:s,index:n,onViewDetails:l}=e,i=(0,r.K$)(s);(0,r.Aj)();let[v,N]=(0,c.useState)(!1),b=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return e&&"bigint"==typeof e?(Number(e)/10**a).toFixed(2):"0"},Z=(()=>{if(!i.vaultInfo)return{color:"sapasafe-status-info",icon:(0,t.jsx)(m.Z,{className:"h-4 w-4"}),text:"Loading...",description:"Loading vault information"};let e=i.vaultInfo.status,a=i.vaultInfo.isActive,s=!!i.canWithdrawCompleted,r=!!i.canWithdrawEarly;switch(e){case 0:if(!a)return{color:"sapasafe-status-info",icon:(0,t.jsx)(m.Z,{className:"h-4 w-4"}),text:"Active",description:"Vault is active"};if(s)return{color:"sapasafe-status-success",icon:(0,t.jsx)(h.Z,{className:"h-4 w-4"}),text:"Ready to Withdraw",description:"Savings plan completed - ready for withdrawal"};if(r)return{color:"sapasafe-status-warning",icon:(0,t.jsx)(x.Z,{className:"h-4 w-4"}),text:"Early Withdrawal Available",description:"Can withdraw early with 10% penalty"};return{color:"sapasafe-status-info",icon:(0,t.jsx)(m.Z,{className:"h-4 w-4"}),text:"Active",description:"Monthly savings plan in progress"};case 1:return{color:"sapasafe-status-error",icon:(0,t.jsx)(x.Z,{className:"h-4 w-4"}),text:"Early Withdrawn",description:"Vault was withdrawn early with penalty"};case 2:return{color:"sapasafe-status-success",icon:(0,t.jsx)(h.Z,{className:"h-4 w-4"}),text:"Completed",description:"Savings plan successfully completed"};case 3:return{color:"sapasafe-status-error",icon:(0,t.jsx)(x.Z,{className:"h-4 w-4"}),text:"Terminated",description:"Vault was terminated"};default:return{color:"sapasafe-status-info",icon:(0,t.jsx)(m.Z,{className:"h-4 w-4"}),text:"Unknown",description:"Vault status unknown"}}})(),k=async()=>{if(!i.canWithdrawEarly){w.Am.error("Early withdrawal not available");return}try{N(!0),await i.withdrawEarlyFunds(),w.Am.success("Early withdrawal initiated! Check your wallet for confirmation.")}catch(e){console.error("Error with early withdrawal:",e),w.Am.error("Failed to process early withdrawal")}finally{N(!1)}},C=async()=>{if(!i.canWithdrawCompleted){w.Am.error("Vault is not ready for withdrawal");return}try{N(!0),await i.withdrawCompletedFunds(),w.Am.success("Withdrawal initiated! Check your wallet for confirmation.")}catch(e){console.error("Error withdrawing:",e),w.Am.error("Failed to withdraw funds")}finally{N(!1)}},V=()=>i.progressPercentage?Number(i.progressPercentage):0;return i.isLoadingVaultInfo?(0,t.jsx)(o.Zb,{className:"sapasafe-card",children:(0,t.jsx)(o.aY,{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)(f.Z,{className:"h-6 w-6 animate-spin"})})})}):i.vaultInfo?(0,t.jsxs)(o.Zb,{className:"sapasafe-card hover:shadow-lg transition-shadow",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.ll,{className:"sapasafe-heading-4",children:["Monthly Savings #",n+1]}),(0,t.jsxs)(o.SZ,{children:[s.slice(0,8),"...",s.slice(-6)]})]}),(0,t.jsx)(u.C,{className:Z.color,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[Z.icon,(0,t.jsx)("span",{children:Z.text})]})})]})}),(0,t.jsxs)(o.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"sapasafe-text-xs text-muted-foreground",children:"Progress"}),(0,t.jsxs)("span",{className:"sapasafe-text-xs font-medium",children:[V(),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 bg-primary",style:{width:"".concat(V(),"%")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Month ",Number(i.currentMonth)||0," of ",i.vaultInfo.totalMonths]}),(0,t.jsxs)("span",{children:[(null===(a=i.paymentSummary)||void 0===a?void 0:a.completedPaymentsCount)||0," payments"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"sapasafe-text-xs text-muted-foreground",children:"Current Balance"}),(0,t.jsxs)("p",{className:"sapasafe-heading-4 flex items-center gap-1",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 text-success"}),i.vaultInfo?b(i.vaultInfo.currentBalance):"0"]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"sapasafe-text-xs text-muted-foreground",children:"Target Amount"}),(0,t.jsxs)("p",{className:"sapasafe-heading-4 flex items-center gap-1",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-primary"}),i.vaultInfo?b(i.vaultInfo.targetAmount):"0"]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-primary/5 rounded-lg border border-primary/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("p",{className:"sapasafe-text-xs font-medium text-primary",children:"Monthly Payment"})]}),(0,t.jsxs)("p",{className:"sapasafe-text-sm",children:[i.vaultInfo?b(i.vaultInfo.monthlyAmount):"0"," per month"]})]}),(0,t.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,t.jsx)("p",{className:"sapasafe-text-xs text-muted-foreground",children:Z.description})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(d.z,{variant:"outline",size:"sm",className:"flex-1 sapasafe-btn-outline",onClick:()=>l(s),children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"Details"]}),!!i.canWithdrawCompleted&&(0,t.jsxs)(d.z,{size:"sm",className:"flex-1 sapasafe-btn-primary",onClick:C,disabled:v,children:[v?(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),v?"Withdrawing...":"Withdraw"]}),!!i.canWithdrawEarly&&!i.canWithdrawCompleted&&(0,t.jsxs)(d.z,{size:"sm",className:"flex-1 border-error/20 text-error hover:bg-error/5",onClick:k,disabled:v,children:[v?(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),v?"Withdrawing...":"Early Withdraw"]})]})]})]}):(0,t.jsx)(o.Zb,{className:"sapasafe-card",children:(0,t.jsx)(o.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(x.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,t.jsx)("p",{className:"sapasafe-text-sm text-muted-foreground",children:"Vault not found"})]})})})}let b=(0,v.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var Z=s(11214),k=s(12751);function C(){let e=(0,k.useRouter)(),{address:a,isConnected:s}=(0,n.m)(),{userVaults:c,getUserVaults:u,withdrawFromVault:h,refreshVaultData:x,isLoading:f,getVaultPenalty:g,vaultFactory:y}=(0,r.S2)(),{addTransaction:v,hasPendingTransactions:j}=(0,r.nC)();Array.isArray(c);let C=Array.isArray(y.userActiveVaults)?y.userActiveVaults:[],V=Array.isArray(y.userCompletedVaults)?y.userCompletedVaults:[],A=Array.isArray(y.userEarlyWithdrawnVaults)?y.userEarlyWithdrawnVaults:[];y.userVaultStatusSummary;let M=y.isLoadingUserActiveVaults||y.isLoadingUserCompletedVaults||y.isLoadingUserEarlyWithdrawnVaults||y.isLoadingUserVaultStatusSummary,E=()=>{e.push("/create-vault")},W=a=>{e.push("/vault-details?id=".concat(a))},S=async()=>{try{console.log("Manually refreshing vault data..."),await x(),await y.refetchUserActiveVaults(),await y.refetchUserCompletedVaults(),await y.refetchUserEarlyWithdrawnVaults(),await y.refetchUserVaultStatusSummary(),console.log("Vault data refreshed"),w.Am.success("Vault data refreshed")}catch(e){console.error("Error refreshing vault data:",e),w.Am.error("Failed to refresh vault data")}};return f?(0,t.jsx)(l.n,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-muted rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-48 bg-muted rounded-lg"},e))})]})})}):s?0!==C.length+V.length+A.length||M?(0,t.jsx)(l.n,{children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"sapasafe-heading-1",children:"My Vaults"}),(0,t.jsx)("p",{className:"sapasafe-text text-muted-foreground",children:"Manage your savings vaults and track your progress"})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4 sm:mt-0",children:[(0,t.jsxs)(d.z,{onClick:S,variant:"outline",className:"sapasafe-btn-outline",disabled:f,children:[(0,t.jsx)(b,{className:"mr-2 h-4 w-4 ".concat(f?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)(d.z,{onClick:E,className:"sapasafe-btn-primary",children:[(0,t.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"Create Vault"]})]})]}),j&&(0,t.jsx)(o.Zb,{className:"sapasafe-card mb-6 border-warning/20 bg-warning/5",children:(0,t.jsx)(o.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 text-warning"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"sapasafe-text-sm font-medium text-warning",children:"You have pending transactions"}),(0,t.jsx)("p",{className:"sapasafe-text-xs text-muted-foreground",children:"Some of your vault operations are being processed"})]})]})})}),C.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"sapasafe-heading-3 mb-4",children:["Active Vaults (",C.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((e,a)=>(0,t.jsx)(N,{vaultAddress:e,index:a,onViewDetails:W},a))})]}),V.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"sapasafe-heading-3 mb-4",children:["Completed Vaults (",V.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map((e,a)=>(0,t.jsx)(N,{vaultAddress:e,index:a,onViewDetails:W},a))})]}),A.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"sapasafe-heading-3 mb-4",children:["Early Withdrawn Vaults (",A.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((e,a)=>(0,t.jsx)(N,{vaultAddress:e,index:a,onViewDetails:W},a))})]}),0===C.length&&0===V.length&&0===A.length&&(0,t.jsx)(i.u,{icon:(0,t.jsx)(p.Z,{className:"h-12 w-12"}),title:"No Vaults Yet",description:"Create your first savings vault to start building your financial future",onAction:E,actionLabel:"Create Your First Vault"})]})}):(0,t.jsx)(l.n,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsx)(i.u,{icon:(0,t.jsx)(p.Z,{className:"h-12 w-12"}),title:"No Vaults Found",description:"You haven't created any savings vaults yet. Start your savings journey today!",actionLabel:"Create Your First Vault",onAction:E})})})}):(0,t.jsx)(l.n,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"sapasafe-heading-1 mb-4",children:"Connect Your Wallet"}),(0,t.jsx)("p",{className:"sapasafe-text text-muted-foreground",children:"Connect your wallet to view your savings vaults"})]})})})}},860:function(e,a,s){"use strict";s.d(a,{u:function(){return o}});var t=s(13267),r=s(11879),n=s(63600),l=s(46716),i=s(4338),c=s(83138),d=s(11214);function o(e){let{title:a,description:s,icon:o,actionLabel:u,onAction:m,variant:h="vaults"}=e;return(0,t.jsx)(n.Zb,{className:"sapasafe-card",children:(0,t.jsx)(n.aY,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center",children:o||(()=>{switch(h){case"vaults":default:return(0,t.jsx)(l.Z,{className:"h-12 w-12 text-muted-foreground"});case"stats":return(0,t.jsx)(i.Z,{className:"h-12 w-12 text-muted-foreground"});case"activity":return(0,t.jsx)(c.Z,{className:"h-12 w-12 text-muted-foreground"})}})()}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"sapasafe-heading-3 text-muted-foreground",children:a}),(0,t.jsx)("p",{className:"sapasafe-text-small text-muted-foreground max-w-sm",children:s})]}),u&&m&&(0,t.jsxs)(r.z,{className:"sapasafe-btn-primary",onClick:m,children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),u]})]})})})}},54108:function(e,a,s){"use strict";s.d(a,{n:function(){return i}});var t=s(13267),r=s(85236),n=s(73355),l=s(92057);function i(e){let{children:a}=e,[s,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0)},[]),(0,t.jsx)(n.M,{mode:"wait",children:s&&(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:a})})}},47435:function(e,a,s){"use strict";s.d(a,{C:function(){return i}});var t=s(13267);s(85236);var r=s(43211),n=s(30733);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(l({variant:s}),a),...r})}},63600:function(e,a,s){"use strict";s.d(a,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var t=s(13267),r=s(85236),n=s(30733);let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},28784:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},48649:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50972:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1861:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},39132:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]])},11214:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},83138:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},4338:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},46716:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(76421).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])}},function(e){e.O(0,[7150,3108,1042,5371,1834,5682,2020,1744],function(){return e(e.s=33880)}),_N_E=e.O()}]);